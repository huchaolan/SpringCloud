# 服务拆分

## 康威定律和微服务

康威定律:任何组织在设计一套系统时，所交付的设计方案在结构上都与该组织的沟通结果保持一致。
设计系统时要和当时的团队技术栈结合，启点和终点不能订脱离实际。

### 服务拆分的方法论

扩展立方模型(Scale Cube)
X轴 水平复制(通过副本扩展将应用水平复制，实现伸缩性和容量可用度)
Z轴 数据分区(每个服务器负责一个数据子集，但是代码都是相同的)
Y轴 功能解耦(按照职责将功能不同的模块)

### 如何拆分功能

+ 单一职责，松耦合，高内聚
+ 关注点分离(按职责分类，按通用性-基础组件，按颗粒度)

### 服务和数据的关系

+ 先考虑业务功能，再考虑数据
+ 无状态服务(如果一个数据可以被多服务共享才能完成一个请求就叫无状态数据)，理想将有状态的服务改成无状态的服务